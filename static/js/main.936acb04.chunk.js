(this["webpackJsonpmj-scoreboard"]=this["webpackJsonpmj-scoreboard"]||[]).push([[0],{37:function(e,t,a){},46:function(e,t,a){e.exports=a(70)},51:function(e,t,a){},52:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(24),l=a.n(o),i=(a(51),a(52),a(53),a(22)),s=a(13),c=a(9),u=a(10),m=a(8),h=a(12),p=a(11),d=a(14),f=a(26),v=a.n(f);v.a.initializeApp({apiKey:"AIzaSyA4apBbTBdGOFsp7DfWQDRzSQAiVBBsJbk",authDomain:"mj-scoreboard.firebaseapp.com",databaseURL:"https://mj-scoreboard.firebaseio.com",projectId:"mj-scoreboard",storageBucket:"mj-scoreboard.appspot.com",messagingSenderId:"3716289166",appId:"1:3716289166:web:597dee87a3669d1dfdefdf",measurementId:"G-FGVHKZXNW0"}),v.a.auth().setPersistence(v.a.auth.Auth.Persistence.LOCAL);v.a;var b=v.a.database(),y=v.a.auth(),E=new v.a.auth.GoogleAuthProvider,g=(a(37),function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={userName:"",photoURL:"",uid:""},n.onLogin=n.onLogin.bind(Object(m.a)(n)),n}return Object(u.a)(a,[{key:"onLogin",value:function(){var e=this;y.signInWithPopup(E).then((function(){e.setState({userName:y.currentUser.displayName,photoURL:y.currentUser.photoURL,uid:y.currentUser.uid});var t=b.ref("userProfiles");t.once("value").then((function(a){a.child(y.currentUser.uid).exists()?t.child(y.currentUser.uid).update({photo:e.state.photoURL,displayName:e.state.userName}):a.child(y.currentUser.uid).set({photo:e.state.photoURL,displayName:e.state.userName,lifeTimeScore:0,gamesWon:0,gamesLost:0,winPercentage:0})})),e.props.history.push("/MainMenu")}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"BasicScreen"},r.a.createElement("h1",null,"MJ Scoreboard"),r.a.createElement(d.a,{size:"lg",variant:"primary",onClick:this.onLogin}," Google Login "))}}]),a}(r.a.Component)),j=Object(s.f)(g),O=a(21),k=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).joinGameRoom=n.joinGameRoom.bind(Object(m.a)(n)),n.createGameRoom=n.createGameRoom.bind(Object(m.a)(n)),n}return Object(u.a)(a,[{key:"joinGameRoom",value:function(){this.props.history.push("/Lobby")}},{key:"createGameRoom",value:function(){var e=(new Date).toDateString()+" "+(new Date).toLocaleTimeString();e=(e=e.split(" ")).join("-");var t=b.ref("gamerooms/").push({date:e,status:"Open",players:Object(O.a)({},y.currentUser.uid,{Total:0})});this.props.history.push("/GameRoom/"+t.key)}},{key:"render",value:function(){return r.a.createElement("div",{className:"BasicScreen"},r.a.createElement("h1",null," Main Menu "),r.a.createElement(d.a,{onClick:this.joinGameRoom,varient:"primary"},"Join Game"),r.a.createElement("br",null),r.a.createElement(d.a,{onClick:this.createGameRoom,varient:"primary"}," Create Game "))}}]),a}(r.a.Component),I=Object(s.f)(k),C=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={status:"Open",ref:"",date:""},n.joinGame=n.joinGame.bind(Object(m.a)(n)),n.spectateGame=n.spectateGame.bind(Object(m.a)(n)),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=b.ref("gamerooms").child(this.props.roomId);t.on("value",(function(a){e.setState({status:a.val().status,ref:t,date:a.val().date})}))}},{key:"componentWillUnmount",value:function(){this.state.ref.child("status").off()}},{key:"joinGame",value:function(){this.state.ref.off(),b.ref("gamerooms/"+this.props.roomId+"/players").update(Object(O.a)({},y.currentUser.uid,{Total:0})),this.props.history.push("/Gameroom/"+this.props.roomId)}},{key:"spectateGame",value:function(){this.props.history.push("/Scoreboard/"+this.props.roomId,{spectator:!0})}},{key:"render",value:function(e){return r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement("h3",null,this.state.date),r.a.createElement("p",null,r.a.createElement("strong",null,"Status: "),this.state.status),"Open"===this.state.status&&r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{onClick:this.joinGame,varient:"Primary"},"Join"),r.a.createElement("br",null)),"Playing"===this.state.status&&r.a.createElement(d.a,{onClick:this.spectateGame,varient:"Secondary"},"Spectate"))}}]),a}(r.a.Component),S=Object(s.f)(C),G=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={gameRooms:[],ref:""},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=b.ref("gamerooms");t.orderByKey().limitToLast(5).on("value",(function(a){var n=[];Object.keys(a.val()).forEach((function(e){n.push(e)})),e.setState({gameRooms:n,ref:t})}))}},{key:"componentWillUnmount",value:function(){this.state.ref.off()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Game Rooms"),this.state.gameRooms.map((function(e){return r.a.createElement(S,{key:e,roomId:e})})))}}]),a}(r.a.Component),P=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={name:"",photo:""},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.ref("userProfiles").child(this.props.playerId).once("value",(function(t){e.setState({name:t.val().displayName,photo:t.val().photo})}))}},{key:"componentWillReceiveProps",value:function(e){var t=this;b.ref("userProfiles").child(e.playerId).once("value",(function(e){t.setState({name:e.val().displayName,photo:e.val().photo})}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("img",{className:"profilePicture",src:this.state.photo,alt:"profile"}),r.a.createElement("p",null,this.state.name))}}]),a}(r.a.Component),M=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("ol",null,this.props.playerInfo.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(P,{playerId:e}))})))}}]),a}(r.a.Component),R=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={roomId:n.props.match.params.roomId,playerInfo:[],ref:""},n.startGame=n.startGame.bind(Object(m.a)(n)),n.leaveGame=n.leaveGame.bind(Object(m.a)(n)),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=b.ref("gamerooms/"+this.state.roomId);t.child("status").on("value",(function(t){"Playing"===t.val()&&e.props.history.push("/Scoreboard/"+e.state.roomId,{playerInfo:e.state.playerInfo})})),t.child("players").on("value",(function(a){var n=[];Object.keys(a.val()).forEach((function(a){n.push(a),e.setState({playerInfo:n,ref:t})}))}))}},{key:"componentWillUnmount",value:function(){this.state.ref.child("status").off()}},{key:"startGame",value:function(){b.ref("gamerooms/"+this.props.match.params.roomId).update({status:"Playing"})}},{key:"leaveGame",value:function(){var e=b.ref("gamerooms/"+this.props.match.params.roomId);this.state.ref.child("players").off(),this.state.playerInfo.length>1?e.child("/players/"+y.currentUser.uid).remove():e.remove(),this.props.history.push("/MainMenu")}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,this.state.roomId),r.a.createElement(M,{playerInfo:this.state.playerInfo}),r.a.createElement(d.a,{disabled:this.state.playerInfo.length<4,onClick:this.startGame,variant:"success"},"Start"),r.a.createElement(d.a,{onClick:this.leaveGame,variant:"danger"},"Cancel"))}}]),a}(r.a.Component),U=Object(s.f)(R),L=a(45),B=a(34),N=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={name:"",value:""},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.ref("userProfiles").child(this.props.name).once("value",(function(t){e.setState({name:t.val().displayName,value:e.props.value})}))}},{key:"render",value:function(){return r.a.createElement("td",null,this.state.name,r.a.createElement("br",null),this.state.value)}}]),a}(r.a.Component),w=a(35),D=a(30),A=a(17),T=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={target:[],points:3},n.submitData=n.submitData.bind(Object(m.a)(n)),n.handlePointChange=n.handlePointChange.bind(Object(m.a)(n)),n.handleTargetChange=n.handleTargetChange.bind(Object(m.a)(n)),n}return Object(u.a)(a,[{key:"submitData",value:function(){var e=b.ref("gamerooms/"+this.props.roomId+"/players"),t=parseInt(this.state.points);1===this.state.target.length?(t>10&&(t=10),e.child(this.state.target[0]).push(Object(O.a)({},y.currentUser.uid,-1*Math.pow(2,t+2))),e.child(y.currentUser.uid).push(Object(O.a)({},this.state.target[0],Math.pow(2,t+2)))):3===this.state.target.length&&(t>11&&(t=11),this.state.target.forEach((function(a){e.child(a).push(Object(O.a)({},y.currentUser.uid,-1*Math.pow(2,t+1))),e.child(y.currentUser.uid).push(Object(O.a)({},a,Math.pow(2,t+1)))}))),this.setState({target:[],points:3}),this.props.onHide()}},{key:"handlePointChange",value:function(e){console.log(e.target.value),this.setState({points:e.target.value})}},{key:"handleTargetChange",value:function(e){e.target.checked?this.setState({target:[].concat(Object(w.a)(this.state.target),[e.target.id])}):this.setState({target:this.state.target.filter((function(t){return t!==e.target.id}))})}},{key:"render",value:function(){var e=this;return r.a.createElement(D.a,{show:this.props.show,onHide:this.props.onHide,centered:!0,"aria-labelledby":"contained-modal-title-vcenter"},r.a.createElement(D.a.Header,{closeButton:!0},r.a.createElement("strong",null,"Add Score")),r.a.createElement(D.a.Body,null,r.a.createElement(A.a,null,r.a.createElement(A.a.Group,{controlId:"formTargets"},r.a.createElement(A.a.Label,null,r.a.createElement("strong",null,"Players")),this.props.players.map((function(t,a){return r.a.createElement(A.a.Check,{id:t.uid,key:a,type:"checkbox",label:r.a.createElement(P,{playerId:t.uid}),onChange:e.handleTargetChange,disabled:t.uid===y.currentUser.uid})}))),r.a.createElement(A.a.Group,{controlId:"formPoints"},r.a.createElement(A.a.Label,null,r.a.createElement("strong",null,"Points Won")),r.a.createElement(A.a.Control,{defaultValue:3,as:"select",htmlSize:"5",custom:!0,onChange:this.handlePointChange},r.a.createElement("option",null,"3"),r.a.createElement("option",null,"4"),r.a.createElement("option",null,"5"),r.a.createElement("option",null,"6"),r.a.createElement("option",null,"7"),r.a.createElement("option",null,"8"),r.a.createElement("option",null,"9"),r.a.createElement("option",null,"10"),r.a.createElement("option",null,"11"),r.a.createElement("option",null,"12"),r.a.createElement("option",null,"13"),r.a.createElement("option",null,"14"),r.a.createElement("option",null,"15"),r.a.createElement("option",null,"16"),r.a.createElement("option",null,"17"),r.a.createElement("option",null,"18"),r.a.createElement("option",null,"19"),r.a.createElement("option",null,"20"))))),r.a.createElement(D.a.Footer,null,r.a.createElement(d.a,{onClick:this.submitData},"Submit")))}}]),a}(r.a.Component),W=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={scores:[],roomId:n.props.match.params.roomId,showModal:!1,ref:""},n.addScore=n.addScore.bind(Object(m.a)(n)),n.endGame=n.endGame.bind(Object(m.a)(n)),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=b.ref("gamerooms/"+this.state.roomId);t.child("status").on("value",(function(t){"Closed"===t.val()&&e.props.history.push("/Result/"+e.state.roomId,{data:e.state.scores})})),t.child("players").on("value",(function(a){var n=[],r=[];a.forEach((function(e){r=[];var t=0;Object.keys(e.val()).forEach((function(a){Object.entries(e.child(a).val()).forEach((function(e){var a=Object(L.a)(e,2),n=a[0],o=a[1];r.push({targetId:n,value:o}),t+=o}))})),n.push({uid:e.key,record:r,total:t})})),e.setState({scores:n.sort((function(e,t){return t.total-e.total})),ref:t})}))}},{key:"componentWillUnmount",value:function(){this.state.ref.child("players").off(),this.state.ref.child("status").off()}},{key:"addScore",value:function(){this.setState({showModal:!0})}},{key:"endGame",value:function(){b.ref("gamerooms/"+this.props.match.params.roomId).update({status:"Closed"})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h2",null,"Scores ",this.state.roomId),r.a.createElement(B.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,variant:"dark"},r.a.createElement("tbody",null,this.state.scores.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,r.a.createElement(P,{playerId:e.uid})),r.a.createElement("td",null,r.a.createElement("strong",null,"Total",r.a.createElement("br",null),e.total)),e.record.map((function(e,t){return r.a.createElement(N,{key:t,name:e.targetId,value:e.value})})))})))),r.a.createElement(d.a,{onClick:this.addScore,variant:"primary",disabled:this.props.location.state.spectator},"Add Score"),r.a.createElement(d.a,{onClick:this.endGame,variant:"danger",disabled:this.props.location.state.spectator},"End Game"),r.a.createElement(T,{roomId:this.state.roomId,players:this.state.scores,show:this.state.showModal,onHide:function(){return e.setState({showModal:!1})}}))}}]),a}(r.a.Component),x=Object(s.f)(W),H=a(29),J=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={data:n.props.location.state.data,payingPlayers:[],billAmount:"",payout:[]},n.handleBill=n.handleBill.bind(Object(m.a)(n)),n.handleNPC=n.handleNPC.bind(Object(m.a)(n)),n.calcBill=n.calcBill.bind(Object(m.a)(n)),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=[];this.state.data.forEach((function(t){e.push(t.uid)})),this.setState({payingPlayers:e})}},{key:"componentWillUnmount",value:function(){}},{key:"handleBill",value:function(e){this.setState({billAmount:e.target.value})}},{key:"handleNPC",value:function(e){e.target.checked?this.setState({payingPlayers:this.state.payingPlayers.filter((function(t){return t!==e.target.id}))}):this.setState({payingPlayers:[].concat(Object(w.a)(this.state.payingPlayers),[e.target.id])})}},{key:"calcBill",value:function(){for(var e=this,t=this.state.payingPlayers.length,a=[[0,.3,.7],[0,.2,.3,.5],[0,.15,.2,.3,.35],[0,0,.15,.2,.3,.35],[0,0,.1,.15,.2,.25,.3],[0,0,0,.1,.15,.2,.25,.3],[0,0,0,.1,.1,.15,.2,.2,.25],[0,0,0,.05,.1,.1,.15,.15,.2,.25]],n=[],r=this.state.billAmount,o=0;o<t;o++){var l=r*a[t-3][o];n.push(l.toFixed(2))}this.state.data.forEach((function(t,a){e.state.payingPlayers.includes(t.uid)||n.splice(a,0,0)})),this.setState({payout:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h1",null,"Results"),r.a.createElement(A.a,null,r.a.createElement(A.a.Group,{as:A.a.Row},r.a.createElement(A.a.Label,{column:!0},"Bill:"),r.a.createElement(H.a,null,r.a.createElement(A.a.Control,{as:"input",type:"number",placeholder:"9.99",onChange:this.handleBill})),r.a.createElement(H.a,null,r.a.createElement(d.a,{variant:"primary",onClick:this.calcBill},"Submit")))),r.a.createElement(B.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,variant:"dark"},r.a.createElement("tbody",null,this.state.data.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,"NPC",r.a.createElement("br",null),r.a.createElement("input",{type:"checkbox",id:t.uid,onClick:e.handleNPC})),r.a.createElement("td",null,r.a.createElement(P,{playerId:t.uid})),r.a.createElement("td",null,t.total),r.a.createElement("td",null,"$",e.state.payout[a]))})))),r.a.createElement(d.a,{variant:"primary",onClick:function(){return e.props.history.push("/MainMenu")}},"Main Menu"))}}]),a}(r.a.Component),z=Object(s.f)(J);var F=function(){return r.a.createElement(i.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/",component:j}),r.a.createElement(s.a,{path:"/MainMenu",component:I}),r.a.createElement(s.a,{path:"/Lobby",component:G}),r.a.createElement(s.a,{path:"/Gameroom/:roomId",component:U}),r.a.createElement(s.a,{path:"/Scoreboard/:roomId",component:x}),r.a.createElement(s.a,{path:"/Result/:roomId",component:z}))))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(F,null)),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.936acb04.chunk.js.map